<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Blog mtcli - Programação</title><link href="https://vfranca.github.io/" rel="alternate"></link><link href="https://vfranca.github.io/feeds/programacao.atom" rel="self"></link><id>https://vfranca.github.io/</id><updated>2025-09-03T14:30:00-03:00</updated><entry><title>Como Criei um Plugin OBV com Python e MetaTrader 5</title><link href="https://vfranca.github.io/plugin-obv-python-mt5.html" rel="alternate"></link><published>2025-09-03T14:00:00-03:00</published><updated>2025-09-03T14:30:00-03:00</updated><author><name>Valmir França da Silva</name></author><id>tag:vfranca.github.io,2025-09-03:/plugin-obv-python-mt5.html</id><summary type="html">&lt;p&gt;Neste post, compartilho como desenvolvi um plugin CLI em Python para calcular o indicador OBV usando a API do MetaTrader 5.&lt;/p&gt;</summary><content type="html">&lt;hr&gt;
&lt;p&gt;Introdução&lt;/p&gt;
&lt;p&gt;O indicador &lt;em&gt;On Balance Volume (OBV)&lt;/em&gt; é uma ferramenta clássica de análise técnica que relaciona volume com variação de preço. Neste post, mostro como criei um &lt;em&gt;plugin para o projeto &lt;a href="https://github.com/vfranca/mtcli"&gt;mtcli&lt;/a&gt;&lt;/em&gt; que calcula o OBV diretamente via linha de comando, usando dados obtidos do MetaTrader 5.&lt;/p&gt;
&lt;p&gt;Etapas&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Conectei ao MetaTrader 5 com &lt;code&gt;MetaTrader5&lt;/code&gt; Python API.&lt;/li&gt;
&lt;li&gt;Recuperei os candles com &lt;code&gt;copy_rates_from_pos&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Apliquei a fórmula do OBV com &lt;code&gt;numpy&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Criei uma opção para exportar os dados para CSV.&lt;/li&gt;
&lt;li&gt;Adicionei testes automatizados com &lt;code&gt;pytest&lt;/code&gt; e &lt;code&gt;monkeypatch&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Exemplo de uso&lt;/p&gt;
&lt;p&gt;bash
mt obv --symbol WINV25 --periods 100 --csv
```&lt;/p&gt;
&lt;p&gt;Resultado
O resultado é um arquivo obv_WINV25.csv contendo:&lt;/p&gt;
&lt;p&gt;csv
Data,OBV
2025-09-03 09:00,0
2025-09-03 09:01,1000
...&lt;/p&gt;
&lt;p&gt;Conclusão&lt;/p&gt;
&lt;p&gt;Com esse plugin, posso visualizar o OBV de qualquer ativo diretamente no terminal — ideal para acessibilidade e automações. O código está disponível em:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/vfranca/mtcli"&gt;https://github.com/vfranca/mtcli&lt;/a&gt;&lt;/p&gt;</content><category term="Programação"></category><category term="python"></category><category term="metatrader5"></category><category term="trading"></category><category term="cli"></category><category term="obv"></category><category term="mtcli"></category></entry></feed>